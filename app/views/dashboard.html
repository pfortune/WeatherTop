#{extends 'main.html' /}
#{set title:'Dashboard' /}

#{menu id:"dashboard"/}


#{if flash.error}
<div class="notification is-danger">
    ${flash.error}
</div>
#{/if}

#{if flash.success}
<div class="notification is-success">
    ${flash.success}
</div>
#{/if}


<form class="box" action="/dashboard/add" method="POST">
    <div class="columns is-multiline is-mobile">
        <div class="field column is-full-mobile is-4-desktop">
            <label class="label">Title</label>
            <input class="input is small" placeholder="Title" type="text" name="title">
        </div>
        <div class="field column is-full-mobile is-4-desktop">
            <label class="label">Latitude</label>
            <input class="input is small" placeholder="Latitude" type="number" step="any" name="latitude" required>
        </div>
        <div class="field column is-full-mobile is-4-desktop">
            <label class="label">Longitude</label>
            <input class="input is small" placeholder="Longitude" type="number" step="any" name="longitude" required>
        </div>
    </div>
    <div class="columns">
        <div class="column">
            <button class="button is-link is-info is-fullwidth">Add Station</button>
        </div>
    </div>
</form>


#{list items:stations, as:'s'}
<div class="content box">
    #{cardreadings station:s/}
    <div>
        <span class="icon">
            <a href="/station/${s.id}"><i class="fa-solid fa-folder-open"></i></a> </i>
        </span>

        <form action="/dashboard/${s.id}/delete" method="POST" style="display: inline;">
            <button type="submit" class="icon" style="border:none; background: none; color: #ff0000;">
                <i class="fa-solid fa-trash-can"></i>
            </button>
        </form>
    </div>

    <style>
        button.icon:hover {
            color: #cc0000!important;
            cursor: pointer;
            font-size:16px;
        }

        button.icon {
            font-size: 16px;
        }
    </style>

</div>
#{/list}

<dialog id="confirmDeleteDialog">
    <p>Are you sure you want to delete this station?</p>
    <button id="confirmDelete">Yes, delete</button>
    <button id="cancelDelete">No, cancel</button>
</dialog>

